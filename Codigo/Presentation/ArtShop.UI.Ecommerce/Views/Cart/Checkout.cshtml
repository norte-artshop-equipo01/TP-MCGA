@{ @model IEnumerable<ArtShop.Entities.Model.CartItem>
double Total = ViewBag.Total;
var ship = ViewBag.Ship;
}

<div class="cart-table-area section-padding-100">
    <div class="container-fluid">

        <div class="row">
            <div class="col-8 col-lg-8">
                <div class="cart-title mt-50">
                    <h2>Checkout</h2>
                </div>

                @foreach (var item in Model)
                {
                    var total = item.Price * item.Quantity;
                    <div class="row cart-summarypersonal">

                        <div class="col-4 col-lg-3">
                            <img src=@String.Format("data:image/gif;base64,{0}", item.Product.Image) alt="Product" style="max-height:200px; ma">
                        </div>

                        <div class="col-6 col-lg-9">
                            <ul>
                                <li><h5>@item.Product.Title</h5>  </li>

                                <li>Precio: $ @item.Price </li>
                                <li>Cantidad: @item.Quantity</li>
                                <li>Total: $ @total</li>

                            </ul>
                        </div>
                    </div>

                }


            </div>

            @*<div class="col-12 col-lg-4">
            <div class="cart-summary">
                <h5>Cart Total</h5>
                <ul class="summary-table">
                    <li><span>subtotal:</span> <span>@Total</span></li>
                    <li><span>delivery:</span> <span>Free</span></li>
                    <li><span>total:</span> <span>@Total</span></li>
                </ul>*@
            @*<div class="cart-btn mt-100" style="padding-top:20px; padding-left:30px">
                <a href="cart.html" class="btn amado-btn w-100">Pagar</a>
            </div>*@
            @*</div>
            </div>*@
            <div class="col-12 col-lg-4">

                <div class="cart-summary">
                    <h5>Cart Total</h5>
                    <ul class="summary-table">
                        <li><span>subtotal:</span> <span>@Total</span></li>
                        <li><span>delivery:</span> <span>Free</span></li>
                        <li><span>total:</span> <span>@Total</span></li>
                    </ul>
                    @using (Html.BeginForm("Shipping", "Cart", FormMethod.Get))
                    {
                        <div class="cart-btn mt-100">
                            <button type="submit" class="btn amado-btn w-100">Proceder con el Pago</button>
                        </div>
                    }
                </div>

            </div>
        </div>
        <div class="col-4 col-lg-4 cart-summarypersonal" data-bind="with: Shipping">
                <div class="col-md-6 mb-3">
                    <label data-bind="text: FirstName">FirstName</label>
                </div>
                <div class="col-md-6 mb-3">
                    <p data-bind="text: LastName">a</p>
                </div>
                <div class="col-md-6 mb-3">
                    <p data-bind="text: Email">a</p>
                </div>
                <div class="col-md-6 mb-3">
                    <p data-bind="text: Address">a</p>
                </div>
                <div class="col-md-6 mb-3">
                    <p data-bind="text: City"></p>
                </div>
                <div class="col-md-6 mb-3">
                    <p data-bind="text: Country"></p>
                </div>
        </div>
    </div>
@section scripts
{
    <script src="~/Scripts/knockout-3.5.1.js"></script>
    <script src="~/Scripts/knockout.mapping-latest.js"></script>

    <script>
        var AppViewModel = function() {
            var self = this;
            self.Shipping = ko.mapping.fromJS([]);

            $.getJSON("/Cart/Getship",
                function(data) {
                    ko.mapping.fromJS(data, {}, self.Shipping);
                });
        }

        var viewModel = new AppViewModel();
        ko.applyBindings(viewModel);

    </script>

}
